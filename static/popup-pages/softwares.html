<h2>Softwares</h2>

<div class="sw-wrap">
    <div class="sw-viewport">
        <div class="sw-track">

            <div class="sw-card">
                <div class="sw-title">deseq2pip</div>
                <div class="sw-body">An R wrapper for DESeq2 to perform multiple comparisons of differential expression and gene set enrichement analysis and visualization.</div>
                <a href="https://github.com/hungms/deseq2pip">>> Click to View Repository</a>
            </div>

            <div class="sw-card">
                <div class="sw-title">rscpip</div>
                <div class="sw-body">A python wrapper for RAPIDS Single-Cell to perform multi-omic single-cell analysis and visualization.</div>
                <a href="https://github.com/hungms/rscpip">>> Click to View Repository</a>
            </div>

            <div class="sw-card">
                <div class="sw-title">ClonoMappeR</div>
                <div class="sw-body">An R package to map BCR seuqences to detect public antigen-specific B-cell clones.</div>
                <a href="https://github.com/hungms/ClonoMappeR">>> Click to View Repository</a>
            </div>

            <div class="sw-card">
                <div class="sw-title">R-AmpSeq</div>
                <div class="sw-body">An R package to perform amplification sequencing analysis and visualization.</div>
                <a href="https://github.com/hungms/R-AmpSeq">>> Click to View Repository</a>
            </div> 

        </div>
    </div>
</div>

<div class="sw-scroll-hint" aria-hidden="true">
    <span class="sw-scroll-hint-text">Scroll</span>
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <polyline points="6 9 12 15 18 9"></polyline>
    </svg>
</div>

<script>
(function () {
    const viewport = document.querySelector('.sw-viewport')
    const cards    = Array.from(document.querySelectorAll('.sw-card'))
    if (!viewport || !cards.length) return

    // Mirror the CSS constants — no DOM reads needed in the hot loop
    const CARD_H  = 340          // --sw-card-h
    const GAP     = 36           // --sw-gap
    const STRIDE  = CARD_H + GAP
    const PEEK    = CARD_H * 0.25
    const PAD_TOP = PEEK + GAP   // track padding-top

    // Scroll-space centre of card[i] — pure arithmetic, zero layout reads
    const cardScrollCenter = (i) => PAD_TOP + i * STRIDE + CARD_H / 2

    // Per-card state + promote to compositor layer
    cards.forEach((card) => {
        card._hoverScale       = 1.0
        card._isHovered        = false
        card.style.willChange  = 'transform, opacity'
        card.addEventListener('mouseenter', () => { card._isHovered = true  })
        card.addEventListener('mouseleave', () => { card._isHovered = false })
    })

    // Scroll hint — hide once user scrolls
    const hint = document.querySelector('.sw-scroll-hint')
    if (hint) {
        viewport.addEventListener('scroll', () => {
            if (viewport.scrollTop > 10) hint.classList.add('sw-hint-hidden')
        }, { passive: true })
    }

    const loop = () => {
        // Only two cheap reads per frame — no reflow
        const scrollTop = viewport.scrollTop
        const vpH       = viewport.clientHeight
        const vpCY      = scrollTop + vpH / 2

        cards.forEach((card, i) => {
            const norm      = (cardScrollCenter(i) - vpCY) / CARD_H
            const angle     = norm * 38
            const baseScale = 1 - Math.abs(norm) * 0.16
            const opacity   = Math.max(0.18, 1 - Math.abs(norm) * 0.58)

            const hoverTarget = card._isHovered ? 1.1 : 1.0
            card._hoverScale  = card._hoverScale + (hoverTarget - card._hoverScale) * 0.12
            const scale       = baseScale * card._hoverScale

            card.style.transform = `perspective(700px) rotateX(${angle}deg) scale(${scale})`
            card.style.opacity   = String(opacity)
            card.classList.toggle('is-active', Math.abs(norm) < 0.35)
        })

        requestAnimationFrame(loop)
    }

    requestAnimationFrame(loop)
})()
</script>
